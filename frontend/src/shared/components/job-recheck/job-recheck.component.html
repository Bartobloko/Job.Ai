<!-- Job Recheck Component -->
<div class="bg-white/80 backdrop-blur-sm border border-white/50 rounded-xl shadow-soft hover:shadow-medium transition-all duration-300 p-6">
  <div class="flex items-center mb-4">
    <div class="w-10 h-10 bg-gradient-to-br from-warning-500 to-warning-600 rounded-2xl flex items-center justify-center mr-4">
      <ng-icon name="heroArrowPath" class="w-5 h-5 text-white"></ng-icon>
    </div>
    <div>
      <h2 class="text-xl font-bold text-secondary-900">Recheck Jobs with Ollama</h2>
      <p class="text-secondary-600 text-sm">Re-analyze job listings from a specific day</p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex items-center justify-center py-8">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
    <span class="ml-3 text-secondary-600">Loading available dates...</span>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
    <div class="flex items-center">
      <ng-icon name="heroExclamationCircle" class="w-5 h-5 text-red-600 mr-2"></ng-icon>
      <span class="text-red-800">{{ error }}</span>
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && jobDays.length > 0" class="space-y-4">
    <!-- Date Selection -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-secondary-700">
        Select Date to Recheck
      </label>
      <select 
        [(ngModel)]="selectedDate"
        class="w-full bg-white border border-secondary-300 rounded-lg px-4 py-3 text-secondary-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200"
      >
        <option value="">Choose a date...</option>
        <option *ngFor="let day of jobDays" [value]="day.job_date">
          {{ formatDate(day.job_date) }} ({{ day.job_count }} jobs)
        </option>
      </select>
    </div>

    <!-- Selected Date Info -->
    <div *ngIf="selectedDate && getSelectedDayInfo()" class="p-4 bg-primary-50 border border-primary-200 rounded-lg">
      <div class="flex items-center">
        <ng-icon name="heroInformationCircle" class="w-5 h-5 text-primary-600 mr-2"></ng-icon>
        <span class="text-primary-800">
          {{ getSelectedDayInfo()?.job_count }} jobs will be rechecked from {{ formatDate(selectedDate) }}
        </span>
      </div>
    </div>

    <!-- Action Button -->
    <div class="flex justify-end">
      <button 
        (click)="onRecheckJobs()"
        [disabled]="!selectedDate || isRecheckingJobs"
        class="inline-flex items-center px-6 py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-secondary-300 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-all duration-200 hover:scale-105 shadow-medium disabled:hover:scale-100"
      >
        <div *ngIf="isRecheckingJobs" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
        <ng-icon *ngIf="!isRecheckingJobs" name="heroArrowPath" class="w-4 h-4 mr-2"></ng-icon>
        <span>{{ isRecheckingJobs ? 'Rechecking...' : 'Recheck Jobs' }}</span>
      </button>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && jobDays.length === 0" class="text-center py-8">
    <div class="w-16 h-16 bg-secondary-100 rounded-full flex items-center justify-center mx-auto mb-4">
      <ng-icon name="heroCalendarDays" class="w-8 h-8 text-secondary-400"></ng-icon>
    </div>
    <h3 class="text-lg font-semibold text-secondary-700 mb-2">No Job History</h3>
    <p class="text-secondary-500">No job listings found in your history to recheck.</p>
  </div>
</div>