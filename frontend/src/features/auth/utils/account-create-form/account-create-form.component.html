<div class="p-4 bg-white/80 backdrop-blur-sm border border-white/50 rounded-xl shadow-soft">
  <div class="max-w-2xl mx-auto space-y-4">
    <!-- Header -->
    <div class="text-center">
      <h1 class="text-lg font-bold text-secondary-900">Create New Job.Ai Account</h1>
    </div>

    <!-- Progress Steps -->
    <div class="flex items-center justify-between mb-6">
      <div class="flex-1 flex items-center">
        <div class="flex-1 h-1"></div>
        <div [class]="'w-6 h-6 rounded-full flex items-center justify-center text-white text-xs transition-colors ' + (currentStep >= 1 ? 'bg-primary-600' : 'bg-secondary-400')">
          1
        </div>
        <div [class]="'flex-1 h-1 transition-colors ' + (currentStep >= 2 ? 'bg-primary-600' : 'bg-secondary-200')"></div>
      </div>
      <div class="flex-1 flex items-center">
        <div [class]="'flex-1 h-1 transition-colors ' + (currentStep >= 2 ? 'bg-primary-600' : 'bg-secondary-200')"></div>
        <div [class]="'w-6 h-6 rounded-full flex items-center justify-center text-white text-xs transition-colors ' + (currentStep >= 2 ? 'bg-primary-600' : 'bg-secondary-400')">
          2
        </div>
        <div [class]="'flex-1 h-1 transition-colors ' + (currentStep >= 3 ? 'bg-primary-600' : 'bg-secondary-200')"></div>
      </div>
      <div class="flex-1 flex items-center">
        <div [class]="'flex-1 h-1 transition-colors ' + (currentStep >= 3 ? 'bg-primary-600' : 'bg-secondary-200')"></div>
        <div [class]="'w-6 h-6 rounded-full flex items-center justify-center text-white text-xs transition-colors ' + (currentStep >= 3 ? 'bg-primary-600' : 'bg-secondary-400')">
          3
        </div>
        <div class="flex-1 h-1 "></div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="bg-white border border-secondary-200 rounded-lg shadow-sm p-4">
      <!-- Step 1: Account Setup -->
      @if (currentStep === 1) {
        <div class="space-y-4">
          <h2 class="text-lg font-bold text-secondary-900">Account Setup</h2>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">Username</label>
            <input
              type="text"
              [(ngModel)]="formData.username"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="Username for this site only"
            />
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block mb-2 text-sm font-medium text-secondary-900">First Name</label>
              <input
                type="text"
                [(ngModel)]="formData.first_name"
                class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
                placeholder="First name used for auto apply"
              />
            </div>
            <div>
              <label class="block mb-2 text-sm font-medium text-secondary-900">Last Name</label>
              <input
                type="text"
                [(ngModel)]="formData.last_name"
                class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
                placeholder="Last name used for auto apply"
              />
            </div>
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">About Me</label>
            <textarea
              [(ngModel)]="formData.about_me"
              rows="3"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="About me that will be used for auto apply (most people put here links for their LinkedIn, GitHub, etc)"
            ></textarea>
          </div>
        </div>
      }

      <!-- Step 2: Job Preferences -->
      @if (currentStep === 2) {
        <div class="space-y-4">
          <h2 class="text-lg font-bold text-secondary-900">Job Preferences</h2>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">Custom Application Prompt</label>
            <textarea
              [(ngModel)]="formData.custom_prompt"
              rows="3"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="Enter your custom application prompt"
            ></textarea>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label class="block mb-2 text-sm font-medium text-secondary-900">Job Experience</label>
              <input
                type="text"
                [ngModel]="formData.experience_level"
                class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
                placeholder="Angular:0-2years, Html:0-3years"
              />
            </div>
            <div>
              <label class="block mb-2 text-sm font-medium text-secondary-900">Blocked Keywords</label>
              <input
                type="text"
                [ngModel]="formData.blocked_keywords"
                class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
                placeholder="PHP, WordPress, Drupal"
              />
            </div>
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">CV Path</label>
            <input
              type="text"
              [(ngModel)]="formData.cv_path"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="/path/to/your/cv.pdf"
            />
          </div>
        </div>
      }

      <!-- Step 3: Integration Setup -->
      @if (currentStep === 3) {
        <div class="space-y-4">
          <h2 class="text-lg font-bold text-secondary-900">Integration Setup</h2>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">LinkedIn li_at Cookie</label>
            <input
              type="text"
              [(ngModel)]="formData.linkedIn_li_at_cookie"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="Your LinkedIn li_at cookie value"
            />
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-secondary-900">Ollama Model Name</label>
            <input
              type="text"
              [(ngModel)]="formData.ai_model"
              class="bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5"
              placeholder="llama2"
            />
            <p class="mt-1 text-sm text-gray-500">Enter the name of your Ollama model (e.g., llama2, codellama, mistral)</p>
          </div>
        </div>
      }

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-6">
        @if (currentStep > 1) {
          <button
            (click)="previousStep()"
            class="px-4 py-2 text-sm font-medium text-secondary-900 bg-white border border-secondary-300 rounded-lg hover:bg-secondary-100 focus:ring-4 focus:ring-secondary-200"
          >
            Previous
          </button>
        }
        <div class="flex-1"></div>
        @if (currentStep < 3) {
          <button
            (click)="nextStep()"
            class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-300"
          >
            Next
          </button>
        }
        @if (currentStep === 3) {
          <button
            (click)="createAccount()"
            class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-300"
          >
            Complete Setup
          </button>
        }
      </div>
    </div>
  </div>
</div>
